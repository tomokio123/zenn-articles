---
title: "[Flutter]Flutterã®éåŒæœŸã«ã¤ã„ã¦ã‚‚ã£ã¨ã¾ã¨ã‚ã¦ã¿ãŸ"
emoji: "ğŸ”–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Flutter","Dart","éåŒæœŸå‡¦ç†","ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘"]
published: true
---
# éåŒæœŸå‡¦ç†ã¨ã¯
- éåŒæœŸå‡¦ç†ã¨ã¯ï¼š**æ™‚é–“ãŒæ›ã‹ã‚‹å‡¦ç†ã‚’è¡Œã†å ´åˆã«ã€æ¬¡ã®å‡¦ç†ï¼ˆç”»é¢å‡ºåŠ›ç­‰ï¼‰ã‚’è¡Œã„ã¤ã¤ã€ãã®å‡¦ç†ã‚’å¾…ã¤å¿…è¦ãŒã‚ã‚‹å‡¦ç†ï¼éåŒæœŸå‡¦ç†**

ã“ã®ç”»åƒãŒã‚ã‹ã‚Šã‚„ã™ã‹ã£ãŸ
![ã‚µãƒ³ãƒã®å¡©ç„¼ã](https://storage.googleapis.com/zenn-user-upload/mt9ez6dyg0p2a6lss56492awjx47)
ã¤ã¾ã‚Šã€
- ã€ŒåŒæœŸå‡¦ç†ã€ã¯ã‚³ãƒ¼ãƒ‰ã®ä¸Šã‹ã‚‰å‡¦ç†ãŒçµ‚ã‚ã£ãŸã‚‰æ¬¡ã®å‡¦ç†ã€ãã‚ŒãŒçµ‚ã‚ã£ãŸã‚‰æ¬¡ã€ã€ã€ã¨ã„ã£ãŸãµã†ã«**å‡¦ç†ã‚’çµ‚ãˆã‚‹ã¾ã§å¾…ã¤**å‡¦ç†ã€‚
- ã€ŒéåŒæœŸå‡¦ç†ã€ã¯**1,2,3ã‚’ãã‚Œãã‚Œé–‹å§‹â†’å„ã€…çµ‚ã‚ã£ãŸã‚‰çµæœã‚’è¿”ã™**ã¨ã„ã†å‡¦ç†ã€‚

ã¾ãŸã€
- æ™®é€šã®é–¢æ•°ã‚„ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ŒåŒæœŸã€å‡¦ç†ã§ã‚ã‚‹ã€‚
- ã€ŒéåŒæœŸã€å‡¦ã¨ã„ã†ã®ã¯ä¸»ã«**Future**ã‚„**Stream**ã‚’é–¢æ•°åã®å‰ã«ã¤ã‘ãŸå‡¦ç†ã§ã‚ã‚‹ã€‚
## éåŒæœŸã®ãƒ¡ãƒªãƒƒãƒˆã¨ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã«ã¤ã„ã¦
- ãƒ¡ãƒªãƒƒãƒˆï¼š**ç„¡é§„ãªå¾…ã¡æ™‚é–“ãŒå°‘ãªã„**ã¨ã„ã†ã“ã¨
ç›´åˆ—ã«(ä¸€ã¤ã®å—ä»˜ã«ä¸€åˆ—ã«ä¸¦ã‚“ã§å‡¦ç†ã‚’å¾…ã£ã¦ã‚‹çŠ¶æ…‹ã§)å‡¦ç†ãŸã¡ãŒä¸¦ã‚“ã§ã„ã‚‹ã®ãŒåŒæœŸå‡¦ç†ãªã®ã«å¯¾ã—ã€åŒæ™‚ä¸¦è¡Œã§å‡¦ç†ã‚’é€²ã‚ã‚‰ã‚Œã‚‹ã®ã§ã€ã€Œå‡¦ç†ãŸã¡ã®å—ä»˜ãŒä½•å€‹ã‚‚ã‚ã‚‹æ„Ÿã˜ã€ã§å‡¦ç†ã‚’é€²ã‚ã‚‰ã‚Œã‚‹ã€‚

- ãƒ‡ãƒ¡ãƒªãƒƒãƒˆï¼š**å¾…ã¡åˆã‚ã›ã‚„é †åºæ€§ã®ç¢ºä¿ãŒé¢å€’**ã¨ã„ã†ã“ã¨
å‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å‡ºåŠ›çµæœã«ä¾å­˜ã™ã‚‹ãªã©ã®ã€Œå‰å‡¦ç†ãŒçµ‚ã‚ã£ã¦ã‹ã‚‰ã€ã§ãªã„ã¨ã€æ¬¡ã‚’é–‹å§‹ã§ããªã„ã‚ˆã†ãªå ´åˆã¯ã€åŒæœŸã‚„å¾…ã¡åˆã‚ã›ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
## Futureã®ã‚³ãƒ¼ãƒ‰ä¾‹
```java:main.dart
import 'dart:async';
import 'dart:io';
class Async {
  void asynctest2() {
    print("method begin");
    print(DateTime.now().toString());
    print("data1 start");
    print(asyncFunc("data1", 3));
    print("data2 start");
    print(asyncFunc("data2", 2));
    print("data3 start");
    print(asyncFunc("data3", 1));
  }
  // timeã®æ™‚é–“åˆ†ã‚¹ãƒªãƒ¼ãƒ—ã—ã€ãã®å¾Œç¾åœ¨æ™‚é–“ã‚’è¿”ã™é–¢æ•°
  Future<String> asyncFunc(String name, int time) async {
    return Future.delayed(Duration(seconds: time), () {
      return name + ":" + DateTime.now().toString();
    });
  }
```

asynctest2ã®ä¸­ã§ã€asyncFuncã¨ã„ã†éåŒæœŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã€‚
1. éåŒæœŸã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã™ã‚‹å ´åˆã¯asyncã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒ¡ã‚½ãƒƒãƒ‰åã®å¾Œã‚ã«ä»˜ä¸ã™ã‚‹ã€‚(ã“ã“ã§ã¯asyncFuncã®å¾Œã‚ã«ãã£ã¤ã„ã¦ã‚‹ã€€async ã¦ã‚„ã¤)
2. Future<String> ã¨ã„ã†ã®ã¯é–¢æ•°ã®å‹ã€‚ã€ŒFutureã‚¯ãƒ©ã‚¹å‹ã€ã¨ã„ã†ã“ã¨ã€‚ãã—ã¦é–¢æ•°ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤ã‚’<>ã“ã“ã«å…¥ã‚Œã¦ã„ã‚‹ã€‚(ã“ã“ã§ã¯Stirngå‹)
å°†æ¥çš„ã«ã¯Stringå‹ã®æˆ»ã‚Šå€¤ã§ã™ã‚ˆã€œã£ã¦ã“ã¨ã€‚

```java:
I/flutter (15069): method begin
I/flutter (15069): 2021-04-10 14:51:43.855018
I/flutter (15069): data1 start
I/flutter (15069): Instance of 'Future<String>'
I/flutter (15069): data2 start
I/flutter (15069): Instance of 'Future<String>'
I/flutter (15069): data3 start
I/flutter (15069): Instance of 'Future<String>'
```
>asynctest2ã¯ã€ãã‚Œãã‚Œã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¾ã™ãŒã€Future<String>ã¨ã„ã†ã‚‚ã®ã‚’ä»®ã§å—ã‘å–ã£ãŸã‚ã¨ã«ã€ã™ãã«ãã®æ¬¡ã®å‡¦ç†ã«ç§»ã£ã¦ã„ã¾ã™ã€‚
æ™‚é–“ã®è¡¨ç¤ºãŒãªã„ã®ã§åˆ†ã‹ã‚Šã¥ã‚‰ã„ã§ã™ãŒã€å„ãƒ¡ã‚½ãƒƒãƒ‰ã‹ã‚‰Future<String>ãŒè¿”ã£ã¦ãã‚‹ã®ã¯sleepã™ã‚‹æ™‚é–“ã‚’å¾…ãŸãšã«(å‡¦ç†ã‚’å®Œäº†ã•ã›ãšã«)è¿”ã£ã¦ãã¦ã„ã¾ã™
ã¤ã¾ã‚Šã€å‘¼ã³å‡ºã—å´ã¯ãã‚Œãã‚Œã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ãŸå¾Œã«ã€æ¬¡ã®å‡¦ç†ã«ç§»ã‚Œã‚‹ãŸã‚éåŒæœŸã®å‡¦ç†ã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¨ã®ã“ã¨ã€‚
## å‡¦ç†ã®æˆ»ã‚Šå€¤ãŒæ¥ã‚‹ã€å…·ä½“çš„ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚„Stringã¸ã®å¤‰æ›ã®ä»•æ–¹
(å„å‡¦ç†ãŸã¡ã®å—ä»˜ã§ã€Œå‡¦æ–¹ç®‹(æˆ»ã‚Šå€¤)ã€ã‚’å‡ºã—ã€è¿”ã‚‰ã›ã‚‹é †ç•ªã‚„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãªã©ã‚’å…·ä½“çš„ã«æ±ºã‚ãŸã„)
ã‚„ã‚Šæ–¹ã¯äºŒç¨®é¡ã€**then**ã¨**await**ãŒã‚ã‚‹(éåŒæœŸå‡¦ç†æ–¹æ³•ã¯ã€ã€Œasyncã¨awaitã€ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã‚‹ã€‚ãƒã‚¹ãƒˆãŒå°‘ãªãã€é€šå¸¸ã®åŒæœŸå‡¦ç†ã¨åŒæ§˜ã«è¨˜è¼‰å¯èƒ½ã§ã‚ã‚Šã€å¯èª­æ€§ãŒé«˜ã„ãŸã‚)
1. **then(ãƒ¡ã‚½ãƒƒãƒ‰)**
```java:main.dart
import 'dart:async';
import 'dart:io';
class Async {
  void asynctest3() async {
    print("method begin");
    print(DateTime.now().toString());
    print("data1 start");
    //Futureå‹ã®resultï¼‘ã®(result1.)then()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™
    Future<String> result1 = asyncFunc("data1", 3);
    result1.then((result) {
      print(result);
    });
    print("data2 start");
    Future<String> result2 = asyncFunc("data2", 2);
    result2.then((result) {
      print(result);
    });
    print("data3 start");
    Future<String> result3 = asyncFunc("data3", 1);
    result3.then((result) {
      print(result);
    });
  }
  // timeã®æ™‚é–“åˆ†ã‚¹ãƒªãƒ¼ãƒ—ã—ã€ãã®å¾Œç¾åœ¨æ™‚é–“ã‚’è¿”ã™é–¢æ•°
  Future<String> asyncFunc(String name, int time) async {
    return Future.delayed(Duration(seconds: time), () {
      return name + ":" + DateTime.now().toString();
    });
  }
```
>Futureã«ã¯thenã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ãŒæº–å‚™ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€å‡¦ç†ãŒçµ‚ã‚ã£ãŸæ™‚ã«å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚
ä»Šå›ã¯ã‚·ãƒ³ãƒ—ãƒ«ã«ã€å€¤ãŒç¢ºå®šã—ãŸã‚‰printã—ã¦ã„ã¾ã™

è¦ã™ã‚‹ã«ã€å®£è¨€ã—ãŸé †é–¢ä¿‚ãªãã€
**thenãƒ¡ã‚½ãƒƒãƒ‰ï¼ã€Œå‡¦ç†ãŒçµ‚ã‚ã£ãŸã‚‰è¡¨ç¤ºã™ã‚‹(å—ä»˜çµ‚ã‚ã£ãŸã‚‰ByeBye)ã€‚ã€**
ãã®è¨¼æ‹ ãŒä»¥ä¸‹
```java:thenthenI/flutter (15069): method begin
I/flutter (15069): 2021-04-10 14:52:49.054188
I/flutter (15069): data1 start
I/flutter (15069): data2 start
I/flutter (15069): data3 start
I/flutter (15069): data3:2021-04-10 14:52:50.070597
I/flutter (15069): data2:2021-04-10 14:52:51.069553
I/flutter (15069): data1:2021-04-10 14:52:52.067980
```
>çµæœã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€ã¾ãšdata1,2,3ãŒstartã—ã€ãã®å¾Œçµ‚ã‚ã£ãŸé †(å‘¼ã³å‡ºã—ãŸé †ã§ã¯ãªã)ã«data3,2,1ã¨æ–‡å­—åˆ—ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚
1,2,3ã¯ãã‚Œãã‚Œ3ç§’,2ç§’,1ç§’ã‚¹ãƒªãƒ¼ãƒ—ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã®ã§ã€é€†é †ã§å‡ºåŠ›ã•ã‚Œã¦ã„ã¾ã™ã€‚
asynctest3ã¨3ã¤ã®asyncFuncã¯ãã‚Œãã‚Œç‹¬ç«‹ã—ã¦éåŒæœŸã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

ã¨ã®ã“ã¨ã€‚dataï¼‘ã€ï¼’ã€ï¼“ã€ã®é †ã«ã‚¹ãƒªãƒ¼ãƒ—æ™‚é–“ã‚’ï¼“ã€ï¼’ã€ï¼‘ã§è¨­å®šã—ãŸã®ã§ã€
(asyncFunc(String name, int time)ã®éƒ¨åˆ†ã§ç¬¬äºŒå¼•æ•°ã« int timeã¨ã—ã¦è¨­å®šã—ãŸ)
```java:
I/flutter (15069): data3:2021-04-10 14:52:50.070597
I/flutter (15069): data2:2021-04-10 14:52:51.069553
I/flutter (15069): data1:2021-04-10 14:52:52.067980
(ã•ã£ãã®ä¸‹ä¸‰è¡Œ)
```
ã“ã†ã‚„ã£ã¦Dataï¼“ã€ï¼’ã€ï¼‘ã€ã®é †ã«å‡¦ç†ãŒçµ‚ã‚ã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‹ã‚‹


2. **await(ãƒ¡ã‚½ãƒƒãƒ‰)**

**await = å€¤ãŒç¢ºå®šã™ã‚‹ã¾ã§å¾…ã¤ã¨ã„ã†ã‚„ã‚Šæ–¹ã€‚**

```java:main.dart
import 'dart:async';
import 'dart:io';
class Async {
  void asynctest4() async {
    print("method begin");
    print(DateTime.now().toString());
    print("data1 start");
    print(await asyncFunc("data1", 3));
    print("data2 start");
    print(await asyncFunc("data2", 2));
    print("data3 start");
    print(await asyncFunc("data3", 1));
  }
  // timeã®æ™‚é–“åˆ†ã‚¹ãƒªãƒ¼ãƒ—ã—ã€ãã®å¾Œç¾åœ¨æ™‚é–“ã‚’è¿”ã™é–¢æ•°
  Future<String> asyncFunc(String name, int time) async {
    return Future.delayed(Duration(seconds: time), () {
      return name + ":" + DateTime.now().toString();
    });
  }
```
`await`ã¨ã„ã†ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ã†ã¨ã€**ãã®å ´ã§éåŒæœŸé–¢æ•°ã®çµ‚äº†ã‚’å¾…ã¡ã¾ã™ã€‚**
```java:
I/flutter (15069): method begin
I/flutter (15069): 2021-04-10 14:54:09.874908
I/flutter (15069): data1 start
I/flutter (15069): data1:2021-04-10 14:54:12.887107
I/flutter (15069): data2 start
I/flutter (15069): data2:2021-04-10 14:54:14.895110
I/flutter (15069): data3 start
I/flutter (15069): data3:2021-04-10 14:54:15.910756
```
`await`ã®å ´åˆã¯ã€data1ã‚’ã¯ã˜ã‚ãŸå¾Œã«ã€data2ã®é–‹å§‹ã‚’è¡Œã†ã®ã§ã¯ãªãã€**data1ã®asyncFuncãŒçµ‚ã‚ã‚‹ã®ã‚’å¾…ã¤**ã€‚
ã¤ã¾ã‚Šã€å¾…ã¡åˆã‚ã›ã‚’è¡Œã„åŒæœŸçš„ã«å‹•ã„ã¦ã‚‹ã€‚
(åŒã˜å‡¦ç†ã®ä¸­ã§ä¸€ç·’ã«ã‚¹ã‚¿ãƒ¼ãƒˆã—ãŸå‡¦ç†ã•ã‚“é”ã‚’å¾…ã£ã¦ã€ã¿ã‚“ãªã§ä¸€ç·’ã«å—ä»˜çµ‚äº†ã—ã€ã¿ã‚“ãªã§ä¸€ç·’ã«å‡¦æ–¹ç®‹ã‚‚ã‚‰ã£ã¦ã‚‹æ„Ÿã˜ï¼)
```dart
I/flutter (15069): data1 start
I/flutter (15069): data1:2021-04-10 14:54:12.887107
I/flutter (15069): data2 start
I/flutter (15069): data2:2021-04-10 14:54:14.895110
I/flutter (15069): data3 start
I/flutter (15069): data3:2021-04-10 14:54:15.910756
```
ã“ã®éƒ¨åˆ†ã«ã‚‚ã‚ã‚‰ã‚ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€æœ€å¾Œã«å‡¦ç†ã•ã‚“é”ãŒå‡ºã¦ã„ãé †ç•ªã¯å®£è¨€ã•ã‚ŒãŸé †(Data1,2,3,ã®é †ãƒ»ã‚³ãƒ¼ãƒ‰ã®ä¸Šã‹ã‚‰)ã§å‡ºã¦ãã¦ã„ã‚‹ã€‚éåŒæœŸã§å‡¦ç†ã‚’é€²ã‚ã‚‹ã‘ã©ã€ã‚³ãƒ¼ãƒ‰é †ã«å‡¦ç†ã®é †ç•ªã‚’æƒãˆã‚‹ã“ã¨(åŒæœŸçš„)ãŒã§ãã‚‹

ä»¥ä¸Šã§ã™ã€‚é–“é•ãˆãŒè¦‹ã¤ã‹ã‚Šæ¬¡ç¬¬ã€æˆ–ã„ã¯çŸ¥è­˜ãŒã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œæ¬¡ç¬¬æ”¹è¨‚ã—ã¦ã„ãã¾ã™ã€‚ğŸ™
[å‚è€ƒè¨˜äº‹](https://zenn.dev/kazutxt/books/flutter_practice_introduction/viewer/intermediate_async)