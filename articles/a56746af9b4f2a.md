---
title: "[Flutter]ã‚¢ãƒ—ãƒªã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã«ã¤ã„ã¦ã®å€‹äººçš„ã¾ã¨ã‚"
emoji: "ğŸ’¨"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Flutter","Dart"]
published: true
---
# ã‚¢ãƒ—ãƒªã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã¨ã¯
ã‚¢ãƒ—ãƒªã¯ã„ã¤ã§ã‚‚ä½¿ã£ã¦ã„ã‚‹ã‚ã‘ã˜ã‚ƒãªãã€ä¸Šã‹ã‚‰è¨­å®šã®ç”»é¢ã‚„é›»è©±ç”»é¢ãŒå‰²ã‚Šè¾¼ã‚“ã§ããŸã‚Šã™ã‚‹ã€‚ã¾ãŸã€ãƒãƒƒã‚¯ã«ç§»å‹•ã•ã›ã¦ã€é•ã†ã‚¢ãƒ—ãƒªã‚’é–‹ã„ãŸã‚Šã™ã‚‹ã‚ˆã†ã«è‰²ã‚“ãªçŠ¶æ…‹ã‚’ã‚‚ã¤ã€‚

#### ä¸€æ™‚åœæ­¢ã‚„å¾©æ—§ã«å¯¾å¿œã—ãŸå‡¦ç†ã‚’æº–å‚™ã—ã¦ãŠãã“ã¨

ã«ã¤ã„ã¦ã®æŠ€è¡“(UXã®å‘ä¸Šã«ã¤ãªãŒã‚‹)

- **statefulWidgetãŒã€Œç”»é¢ã€ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«**ãªã‚‰**ç”»é¢ã®å‰²ã‚Šè¾¼ã¿æ™‚ãªã©ã®çŠ¶æ…‹ã¯ã€Œã‚¢ãƒ—ãƒªã€ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«**ã ã¨è¨€ãˆã‚‹

# ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ä¾‹
ãƒã‚¤ãƒ³ãƒˆã¯ä»¥ä¸‹ã‹ã‚‰å¼•ç”¨ã—ã¦ããŸéƒ¨åˆ†
>`didChangeAppLifecycleState`ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ãŒ**å¤‰æ›´ãŒã‚ã‚‹ãŸã³**ã«å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚
>å¼•æ•°ã®`AppLifecycleState`ã¯**çŠ¶æ…‹ã«å¯¾å¿œã™ã‚‹ä»¥ä¸‹ã®4ã¤ã®ã„ãšã‚Œã‹ã‚’è¿”ã—ã¾ã™**ã€‚

- AppLifecycleState.inactive:éã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚
- AppLifecycleState.paused:åœæ­¢æ™‚
- AppLifecycleState.resumed:å†é–‹æ™‚
- AppLifecycleState.detached:ç ´æ£„æ™‚

```dart:main.dart
import 'package:flutter/foundation.dart';
import 'package:flutter/material.dart';
void main() {
  runApp(MyApp());
}
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}
class MyHomePage extends StatefulWidget {
  MyHomePage({Key? key, required this.title}) : super(key: key);
  final String title;
  @override
  _MyHomePageState createState() => _MyHomePageState();
}
class _MyHomePageState extends State<MyHomePage> with WidgetsBindingObserver {
  // Pointâ‘ 
  // `with WidgetsBindingObserver`ã§ãƒŸãƒƒã‚¯ã‚¹ã‚¤ãƒ³ã‚’ã™ã‚‹ã“ã¨ã§ã‚¢ãƒ—ãƒªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ç®¡ç†ãŒå¯èƒ½
  @override
  void initState() {
    super.initState();
    WidgetsBinding.instance!.addObserver(this);
  }
  @override
  void dispose() {
    print("dispose");
    WidgetsBinding.instance!.removeObserver(this);
    super.dispose();
  }
  @override
  void didChangeAppLifecycleState(AppLifecycleState state) {
    //Pointâ‘¡
//didChangeAppLifecycleState()ãŒçŠ¶æ…‹ã®å¤‰æ›´ãŒã‚ã£ãŸæ™‚ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãªã®ã§ãã®ä¸­ã§çŠ¶æ…‹ã‚’å‡ºåŠ›ã€‚
// å¼•æ•°ã®AppLifecycleStateã¯çŠ¶æ…‹ã«å¯¾å¿œã™ã‚‹ä»¥ä¸‹ã®4ã¤ã®ã„ãšã‚Œã‹ã‚’è¿”ã—ã¾ã™ã€‚
    print("stete = $state");//çŠ¶æ…‹ã‚’è©³ã—ãå‡ºã™
    switch (state) {
      case AppLifecycleState.inactive:
        print('éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ãªã£ãŸã¨ãã®å‡¦ç†');
        break;
      case AppLifecycleState.paused:
        print('åœæ­¢ã•ã‚ŒãŸã¨ãã®å‡¦ç†');
        break;
      case AppLifecycleState.resumed:
        print('å†é–‹ã•ã‚ŒãŸã¨ãã®å‡¦ç†');
        break;
      case AppLifecycleState.detached:
        print('ç ´æ£„ã•ã‚ŒãŸã¨ãã®å‡¦ç†');
        break;
    }
  }
  int _counter = 0;
  _incrementCounter() {
    setState(() {
      _counter++;
    });
  }
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(widget.title),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            Text(
              'You have pushed the button this many times:',
            ),
            Text(
              '$_counter',
              style: Theme.of(context).textTheme.headline4,
            ),
          ],
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: _incrementCounter,
        tooltip: 'Increment',
        child: Icon(Icons.add),
      ),
    );
  }
}
```

- `with WidgetsBindingObserver`ã§ãƒŸãƒƒã‚¯ã‚¹ã‚¤ãƒ³ã‚’ã™ã‚‹ã“ã¨ã§ã‚¢ãƒ—ãƒªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ç®¡ç†ãŒå¯èƒ½ã€‚

- `didChangeAppLifecycleState`ãŒçŠ¶æ…‹ã®å¤‰æ›´ãŒã‚ã£ãŸæ™‚ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãªã®ã§ã€ãã®ä¸­ã§çŠ¶æ…‹ã‚’å‡ºåŠ›ã€‚

<br>

ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã«ç§»ã—ãŸã¨ãã®è¡¨ç¤º
```dart
/flutter ( 5955): stete = AppLifecycleState.inactive
I/flutter ( 5955): éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ãªã£ãŸã¨ãã®å‡¦ç†//å›ºã¾ã£ãŸã‚Šã—ãŸæ™‚
I/flutter ( 5955): stete = AppLifecycleState.paused
I/flutter ( 5955): åœæ­¢ã•ã‚ŒãŸã¨ãã®å‡¦ç†//ä»–ã®ã‚¢ãƒ—ãƒªé–‹ã„ãŸã‚Šã—ã¦ã‚‹æ™‚
```
ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã«ç§»ã—ãŸã¨ãã®è¡¨ç¤º
```dart
I/flutter ( 5955): stete = AppLifecycleState.resumed
I/flutter ( 5955): å†é–‹ã•ã‚ŒãŸã¨ãã®å‡¦ç†//ã¾ãŸã‚¢ãƒ—ãƒªé–‹ã„ãŸæ™‚
```
>ã©ã®çŠ¶æ…‹ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒå‘¼ã°ã‚Œã‚‹ã‹ã¯æ©Ÿå™¨ã‚„OSã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚
detachedãŒã‚¢ãƒ—ãƒªãŒçµ‚äº†ã—ãŸæ™‚ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ã¨ã•ã‚Œã¦ã„ã¾ã™ãŒã€æœ¬ãƒãƒ£ãƒ—ã‚¿ãƒ¼åŸ·ç­†æ™‚ã«æ¤œè¨¼ã—ãŸã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚„å®Ÿæ©Ÿã§ã¯è¡¨ç¤ºã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã§ã—ãŸã€‚
ã¨ã®ã“ã¨ã€‚

***
**[ã¾ã¨ã‚]**
- **ã‚¢ãƒ—ãƒªã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã¨ã¯ä¸€æ™‚åœæ­¢ã‚„å¾©æ—§ã«å¯¾å¿œã—ãŸå‡¦ç†ã‚’æº–å‚™ã—ã¦ãŠããŸã‚ã®ã‚‚ã®**

- didChangeAppLifecycleStateã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ãŒå¤‰æ›´ãŒã‚ã‚‹ãŸã³ã«å‘¼ã³å‡ºã•ã‚Œ,
å¼•æ•°ã®AppLifecycleStateã¯çŠ¶æ…‹ã«å¯¾å¿œã™ã‚‹ä»¥ä¸‹ã®4ã¤ã®ã„ãšã‚Œã‹ã‚’è¿”ã™ã€‚

  - AppLifecycleState.inactive:éã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚
  - AppLifecycleState.paused:åœæ­¢æ™‚
  - AppLifecycleState.resumed:å†é–‹æ™‚
  - AppLifecycleState.detached:ç ´æ£„æ™‚

- with WidgetsBindingObserverã§ãƒŸãƒƒã‚¯ã‚¹ã‚¤ãƒ³ã‚’ã™ã‚‹ã“ã¨ã§ã‚¢ãƒ—ãƒªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ç®¡ç†ãŒå¯èƒ½ã§,didChangeAppLifecycleStateãŒçŠ¶æ…‹ã®å¤‰æ›´ãŒã‚ã£ãŸæ™‚ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãªã®ã§ã€ãã®ä¸­ã§çŠ¶æ…‹ã‚’å‡ºåŠ›ã€‚    

ä»¥ä¸Šã§ã™ã€‚é–“é•ãˆãŒè¦‹ã¤ã‹ã‚Šæ¬¡ç¬¬ã€æˆ–ã„ã¯çŸ¥è­˜ãŒã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œæ¬¡ç¬¬æ”¹è¨‚ã—ã¦ã„ãã¾ã™ã€‚ğŸ™

[å‚è€ƒè¨˜äº‹](https://zenn.dev/kazutxt/books/flutter_practice_introduction/viewer/intermediate_applifecycle#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB%E3%81%A8%E3%81%AF)