---
title: "[Flutter]Riverpodã«ã¤ã„ã¦ã®å€‹äººçš„ã¾ã¨ã‚"
emoji: "ğŸ£"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Flutter","Dart"]
published: true
---
[å‚è€ƒè¨˜äº‹](https://www.flutter-study.dev/firebase-app/riverpod)ã“ã®è¨˜äº‹ã‚’å™›ã¿ç •ãã¾ã¨ã‚ã¾ã—ãŸ
# Riverpodã¨ã¯
- çŠ¶æ…‹ç®¡ç†(ç‰¹ã«ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—)ã‚’å††æ»‘ã«é€²ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

# æ™®é€šã«ãƒ‡ãƒ¼ã‚¿å¤‰æ›´ã«ä¼´ã£ã¦å…¨éƒ¨å†æç”»ã™ã‚‹ã¨ï¼Ÿ
![](https://www.flutter-study.dev/images/about-widget.svg)

- å…¨ã¦ã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã«ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã—ã¦å†æç”»ã—ã¦ã„ã‚‹ã¨UXã‚„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®é¢ã§è‡´å‘½çš„ã«ãªã‚‹ã€‚
- ãã“ã§çŠ¶æ…‹ç®¡ç†ã®ä»•çµ„ã¿ã§ã‚ã‚‹Riverpodãªã©ã‚’ä½¿ã†ã“ã¨ã«ã‚ˆã£ã¦ã€ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã™ã‚‹ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’æœ€é©åŒ–ã—ãŸã‚Šã€å†æç”»ã™ã‚‹ç¯„å›²ã‚’æŒ‡å®šã§ããŸã‚Šã§ãã‚‹ã€‚

# Riverpodã®ä»•çµ„ã¿ã¨ä½¿ç”¨æ‰‹é †
1. ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã€ŒProviderã€ã¨ã„ã†å¤‰æ•°ã‚’è¨­ç½®ã—ã¦ãŠãã€ãã‚Œã‚’ä¸­å¿ƒã«æ“ä½œã—ã€(ã‚°ãƒ­ãƒ¼ãƒãƒ«ã ãŒã€å¿…ãšfinalã‚’ã¤ã‘ã¦ä¸å¤‰(immutable)ã«ã—ã¦å¤–éƒ¨ã‹ã‚‰å¤‰æ›´ã§ããªãã—ã¦ãŠãã€)StateProvider ã‚’ä½¿ã„**å—ã‘æ¸¡ã™ãƒ‡ãƒ¼ã‚¿ã‚’å®šç¾©**ã™ã‚‹ã€‚

![](https://www.flutter-study.dev/images/firebase-app/riverpod-state.svg)

2. æœ€åˆã®Widgetã‚’ ProviderScope() ã®å­Widgetã¨ã—ã€**ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—ãŒå¯èƒ½ãªçŠ¶æ…‹**ã«ã™ã‚‹ã€‚
->Scope(çŠ¶æ…‹ç®¡ç†ã®ç®¡è½„ç¯„å›²)ã‚’æŒ‡å®šã™ã‚‹ãŸã‚

3. ConsumerWidget ã‚’ä½¿ã„**ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹**

***

#### ConsumerWidget ã¨ã¯
- build()ã‹ã‚‰**ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹**äº‹ãŒã§ãã‚‹widgetã€‚
#### ãã®ä½¿ç”¨æ–¹æ³•
- **watch()ã‚’ä½¿ã„ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹**
- **å€¤ã¯.stateã«å…¥ã£ã¦ã„ã‚‹(ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ)**

[ConsumerWidget](https://pub.dev/documentation/flutter_riverpod/latest/flutter_riverpod/ConsumerWidget-class.html)ã«ã‚ˆã‚‹ã¨ã€ã€
>ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ãƒªãƒƒã‚¹ãƒ³ã§ãã‚‹StatelessWidget ã€‚

>ConsumerWidgetã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ ãƒ„ãƒªãƒ¼ãŒãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®å¤‰æ›´ã‚’ãƒªãƒƒã‚¹ãƒ³ã§ãã‚‹ãŸã‚ã€å¿…è¦ã«å¿œã˜ã¦ UI ãŒè‡ªå‹•çš„ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚

#### è¦ã™ã‚‹ã«ã€

- **å®šç¾©ã—ãŸã€ŒProviderã€ã§å€¤ã®å¤‰æ›´ãŒã‚ã£ãŸå ´åˆã«ã€ãã®å¤‰æ›´ã‚’èª­ã¿å–ã‚Šã€å¿…è¦ã«å¿œã˜ã¦ UI ãŒè‡ªå‹•çš„ã«æ›´æ–°ã§ãã‚‹ä¾¿åˆ©ãªwidget**

```dart:main.dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';

// â‘ ã®éƒ¨åˆ†ã€‚StateProviderã‚’ä½¿ã„å—ã‘æ¸¡ã™ãƒ‡ãƒ¼ã‚¿ã‚’å®šç¾©ã™ã‚‹ã€‚ã“ã“ã§ã¯final countProviderã€€ã‚’è¨­ç½®
// â€» Providerã®ç¨®é¡ã¯è¤‡æ•°ã‚ã‚‹ãŒã€ã“ã“ã§ã¯ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã§ãã‚‹StateProviderã‚’ä½¿ã†
final countProvider = StateProvider((ref) {
  return 0;
});

void main() {
  runApp(
    //ã€€â‘¡ Riverpodã§ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘æ¸¡ã—ãŒå¯èƒ½ãªçŠ¶æ…‹ã«ã™ã‚‹ãŸã‚ã«å¿…è¦
    // ProviderScope()ã®å­ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã«ã‚ã‚‹ã‚‚ã®ã‚’çŠ¶æ…‹ç®¡ç†ã™ã‚‹ã€‚
    ProviderScope(
      child: MaterialApp(
        title: 'Flutter Demo',
        home: MyWidget(),
      ),
    ),
  );
}

// â‘¢ConsumerWidgetã‚’ä½¿ã†ã¨build()ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹äº‹ãŒã§ãã€
// â‘ ã§å®šç¾©ã—ãŸProviderã®å€¤ã®å¤‰æ›´ã‚’èª­ã¿å–ã‚ŠUIã‚’è‡ªå‹•æ›´æ–°ã—ã¦ã„ãã€‚
class MyWidget extends ConsumerWidget {
  @override
  Widget build(BuildContext context, ScopedReader watch) {
    // watch()ã‚’ä½¿ã„ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹
    // å€¤ã¯.stateã«å…¥ã£ã¦ã„ã‚‹
    final count = watch(countProvider).state;

    return Scaffold(
      body: Center(
        child: Text('count is $count'),
      ),
    );
  }
}
```
<br>

ä»¥ä¸Šã§ã™ã€‚é–“é•ãˆãŒè¦‹ã¤ã‹ã‚Šæ¬¡ç¬¬ã€æˆ–ã„ã¯çŸ¥è­˜ãŒã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œæ¬¡ç¬¬æ”¹è¨‚ã—ã¦ã„ãã¾ã™ã€‚ğŸ™

ps.ä¸­å›½èªã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å°‚é–€ç”¨èªå…¨ç„¶ã‚ã‹ã‚‰ã‚“ã€ã€


[å‚è€ƒè¨˜äº‹](https://www.flutter-study.dev/firebase-app/riverpod)
[ConsumerWidget](https://pub.dev/documentation/flutter_riverpod/latest/flutter_riverpod/ConsumerWidget-class.html)


